(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],f=0,h=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/preference-model/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},3286:function(e,t,r){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("keep-alive",[r("router-view")],1)],1)},i=[],s=r("2877"),o={},c=Object(s["a"])(o,a,i,!1,null,null,null),u=c.exports,l=r("8c4f"),f=r("5f5b"),h=r("b1e0"),p=r("b1fc"),d=r("bd8c"),v=r.n(d),g=r("ecee"),m=r("ad3d"),b=r("f2d1"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Images",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},w=[],y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[e.state===e.stateKind.WELCOME?[r("h1",[e._v("Make the Person of Your Dreams")]),r("h4",[e._v("A demonstration of human-AI collaboration in computational creativity")])]:e._e(),e.state===e.stateKind.WELCOME||null!==e.fullPicture?[r("ShareNetwork",{attrs:{network:"Facebook",url:e.shareUrl(),title:e.shareTitle()}},[r("b-button",{attrs:{variant:"secondary"}},[r("font-awesome-icon",{attrs:{icon:["fab","facebook"],size:"lg"}})],1)],1),r("ShareNetwork",{attrs:{network:"Twitter",url:e.shareUrl(),title:e.shareTitle()}},[r("b-button",{attrs:{variant:"secondary"}},[r("font-awesome-icon",{attrs:{icon:["fab","twitter"],size:"lg"}})],1)],1),r("ShareNetwork",{attrs:{network:"VK",url:e.shareUrl(),title:e.shareTitle()}},[r("b-button",{attrs:{variant:"secondary"}},[r("font-awesome-icon",{attrs:{icon:["fab","vk"],size:"lg"}})],1)],1),r("ShareNetwork",{attrs:{network:"Email",url:e.shareUrl(),title:e.shareTitle(),description:"\n        Please put the URL above to the address bar of your browser."}},[r("b-button",{attrs:{variant:"secondary"}},[r("b-icon",{attrs:{icon:"envelope"}})],1)],1)]:e._e(),e.state===e.stateKind.WELCOME?[r("div",{staticClass:"youtube-super-container"},[r("div",{staticClass:"youtube-container"},[r("iframe",{staticClass:"youtube-video",attrs:{src:"https://www.youtube.com/embed/7jcK6ndK4tY",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])]),r("div",{staticClass:"main-text"},[r("section",[r("p",[e._v("This app demonstrates how computational creativity can work together with you to create beautiful pictures.")]),r("p",[e._v("In the beginning, you will see random pictures dreamed up by a neural network. This neural network is called a generator. The people on the images look natural, but they do not exist! ")]),r("p",[e._v("When you like some pictures, the AI will learn them. Then, the generator starts to create new images sharing the common traits of your likes.")]),r("p",[e._v("You can vary the pictures less or more by changing the "),r("b",[e._v("Variance")]),e._v(".")]),r("p",[e._v("Now you can select the best of the new pictures to create even more beautiful ones. Eventually, you can let the AI make the person of your dreams!")]),r("p",[e._v("See more on "),r("a",{attrs:{href:"https://github.com/ivan-alles/preference-model"}},[e._v("Github")]),e._v(".")])]),r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.startDemo()}}},[e._v(" Start ")]),r("section",[r("h2",[e._v("Credits")]),r("p",[e._v(" The generator is from the "),r("a",{attrs:{href:"https://github.com/tkarras/progressive_growing_of_gans"}},[e._v("Progressive Growing of GANs for Improved Quality, Stability, and Variation")]),e._v(" by Tero Karras, Timo Aila, Samuli Laine, and Jaakko Lehtinen, licensed under the Creative Commons CC BY-NC 4.0 license. ")])])],1)]:e._e(),e.state===e.stateKind.WORKING?[null===e.fullPicture?[r("div",{staticClass:"flex-container content"},[e._l(e.pictures,(function(t,n){return r("div",{key:n,staticClass:"picture"},[null!==t.preview?[r("img",{staticClass:"preview-img",attrs:{src:t.preview},on:{click:function(r){return e.showFullPicture(t)}}}),t.liked?r("span",[r("b-icon",{staticClass:"like-button liked",attrs:{icon:"heart-fill"},on:{click:function(r){return e.toggleLike(t)}}})],1):r("span",[r("b-icon",{staticClass:"like-button",attrs:{icon:"heart"},on:{click:function(r){return e.toggleLike(t)}}})],1)]:[r("h4",[r("b-spinner",{attrs:{variant:"secondary",label:"Dreaming"}}),e._v(" Dreaming ")],1)]],2)})),r("p",{staticClass:"placeholder-picture"},[e.isScrollingRequiredForNewPictures?[e._v(" Scroll for more pictures ")]:e._e()],2)],2),r("p",{staticClass:"placeholder-picture"}),r("div",{staticClass:"footer"},[r("b-container",[e.hasLikes?[r("div",{staticClass:"flex-container content"},[r("b-icon",{staticClass:"like-in-likes",attrs:{icon:"heart-fill"}}),e._l(e.findLikes,(function(t,n){return r("div",{key:n,staticClass:"liked-picture"},[null!==t.preview?[r("img",{staticClass:"liked-img",attrs:{src:t.preview},on:{click:function(r){return e.toggleLike(t)}}})]:e._e()],2)})),r("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.unlikeAll()}}},[r("b-icon",{attrs:{icon:"trash"}})],1),r("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.stopDemo()}}},[e._v(" Quit ")])],2),r("b-row",[r("b-col",{attrs:{sm:"1"}},[r("label",[e._v("Variance")])]),r("b-col",{attrs:{sm:"3",id:"variance-slider"}},[r("b-form-input",{attrs:{type:"range",min:"0",max:"4"},model:{value:e.varianceSlider,callback:function(t){e.varianceSlider=t},expression:"varianceSlider"}})],1)],1)]:[r("p",[e._v("Making random pictures.")]),r("p",[r("b-icon",{staticClass:"like-in-text",attrs:{icon:"heart-fill"}}),e._v(" Like some pictures to dream similar ones. "),r("b-button",{attrs:{variant:"secondary",id:"stopDemoButton"},on:{click:function(t){return e.stopDemo()}}},[e._v(" Quit ")])],1)]],2)],1)]:[r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.closeFullPicture()}}},[r("b-icon",{attrs:{icon:"arrow-left-short"}}),e._v(" Continue ")],1),null!==e.fullPicture.full&&"ERROR"!==e.fullPicture.full?[r("img",{staticClass:"full-picture",attrs:{src:e.fullPicture.full}})]:[r("img",{staticClass:"full-picture",attrs:{src:e.fullPicture.preview}})]]]:e._e(),e.state===e.stateKind.INIT?[r("h4",[r("b-spinner",{attrs:{variant:"secondary",label:"Loading"}}),e._v(" "+e._s(e.progressMessage)+" ")],1),e.isMobile?[r("p",[e._v("Running this app on a mobile device can be slow or irresponsive. It works best on a desktop with an NVIDIA graphic card.")])]:e._e()]:e._e(),e.state===e.stateKind.ERROR?[r("h4",{staticClass:"error"},[r("b-icon",{attrs:{icon:"exclamation-circle-fill",variant:"danger"}}),e._v(" Error ")],1),r("p",[e._v(" This app works best on a desktop with an NVIDIA graphic card. Other devices may not be supported. ")]),r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.reload()}}},[r("b-icon",{attrs:{icon:"bootstrap-reboot"}}),e._v(" Reload ")],1),r("b-button",{attrs:{variant:"secondary"},on:{click:function(t){e.showFatalError=!0}}},[e._v(" Details ")]),e.showFatalError?[r("p",{staticClass:"fatal-error-text"},[e._v(e._s(this.fatalError))])]:e._e()]:e._e()],2)},x=[],O=r("b85c"),E=r("1da1"),R=r("d4ec"),_=r("bee2"),P=r("ade3"),T=(r("96cf"),r("4de4"),r("b0c0"),r("d3b7"),r("2909")),j=r("3835"),C=(r("4fad"),r("99af"),r("cb29"),r("4c53"),r("b65f"),r("a15b"),r("fb6a"),r("1276"),r("ac1f"),r("ce1a")),M=r("0ad6"),I={common:"/karras2018iclr-celebahq-1024x1024-common.tfjs/model.json",preview:"/karras2018iclr-celebahq-1024x1024-preview.tfjs/model.json",full:"/karras2018iclr-celebahq-1024x1024-full.tfjs/model.json"},L=function(){function e(t){Object(R["a"])(this,e),this.logger=t,this.models={}}return Object(_["a"])(e,[{key:"init",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=1,n=0,a=Object.entries(I);case 2:if(!(n<a.length)){e.next=14;break}return i=Object(j["a"])(a[n],2),s=i[0],o=i[1],o="/preference-model"+o,console.log("Loading model ".concat(o," ...")),e.next=8,Object(M["a"])(o,{onProgress:function(e){var n=Math.round(100*e);t("Loading neural network ".concat(r,": ").concat(n,"%"))}});case 8:this.models[s]=e.sent,console.log("Model loaded"),++r;case 11:n++,e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generate",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,c,u,l,f,h,p,d,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=[],a=0;a<t.shape[0];++a){i={},s=Object(O["a"])(r);try{for(s.s();!(o=s.n()).done;)c=o.value,i[c]="ERROR"}catch(g){s.e(g)}finally{s.f()}n.push(i)}u=null,e.prev=3,u=this.models["common"].predict(t),l=document.createElement("canvas"),f=Object(O["a"])(r),e.prev=7,f.s();case 9:if((h=f.n()).done){e.next=19;break}if(p=h.value,this.models[p]){e.next=13;break}return e.abrupt("continue",17);case 13:return e.next=15,this.makePictures(p,u,l);case 15:for(d=e.sent,v=0;v<n.length;++v)n[v][p]=d[v];case 17:e.next=9;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](7),f.e(e.t0);case 24:return e.prev=24,f.f(),e.finish(24);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](3),this.logger.logException("Generator.generate",e.t1);case 32:return e.prev=32,C["k"](u),e.finish(32);case 35:return e.abrupt("return",n);case 36:case"end":return e.stop()}}),e,this,[[3,29,32,35],[7,21,24,27]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"makePictures",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=null,i=new Array(r.shape[0]).fill("ERROR"),e.prev=2,a=C["y"]((function(){var e=o.models[t].predict(r);return e=C["g"](e,0,1),e.unstack(0)})),s=0;case 5:if(!(s<a.length)){e.next=12;break}return e.next=8,C["e"].toPixels(a[s],n);case 8:i[s]=n.toDataURL("image/jpg");case 9:++s,e.next=5;break;case 12:e.next=20;break;case 14:e.prev=14,e.t0=e["catch"](2),this.logger.logException("Generator.makePictures",e.t0),this.models[t].dispose(),delete this.models[t],console.log("Removed model '".concat(t,"'"));case 20:return e.prev=20,C["k"](a),e.finish(20);case 23:return e.abrupt("return",i);case 24:case"end":return e.stop()}}),e,this,[[2,14,20,23]])})));function t(t,r,n){return e.apply(this,arguments)}return t}()}]),e}(),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512;Object(R["a"])(this,e),this.shape=t,this.VARIANCE_PARAMS=[[10,1,.02],[3,1,.03],[1,1,.05],[1,1.5,.07],[1.2,2,.1]],this.trainingExamplesPhi=null}return Object(_["a"])(e,[{key:"init",value:function(){var e=this.shape-1;this.trainingExamplesPhi=C["x"]([]),this.const2=C["x"](Array(e-1).fill(2).concat(1),[1,e]),this.constPi=C["x"](Array(e-1).fill(Math.PI).concat(0),[1,e])}},{key:"isRandom",get:function(){return null===this.trainingExamplesPhi||0===this.trainingExamplesPhi.shape[0]}},{key:"train",value:function(e){var t=this;C["k"](this.trainingExamplesPhi),this.trainingExamplesPhi=C["y"]((function(){return t.toSperical(e)}))}},{key:"toSperical",value:function(e){if(0===e.shape[0])return C["x"]([]);var t=D(e);return t.mul(this.const2).sub(this.constPi)}},{key:"toCartesian",value:function(e){return e=e.add(this.constPi).div(this.const2),F(e)}},{key:"generate",value:function(e,t){if(this.isRandom)return C["q"]([e,this.shape]);var r=this.VARIANCE_PARAMS[t],n=this.trainingExamplesPhi,a=n.shape[0],i=null;if(1==a)i=n.broadcastTo([e,n.shape[1]]);else{var s=W([e],a,r[0],r[1]).expandDims(2),o=C["t"](n).broadcastTo([e].concat(Object(T["a"])(n.shape))),c=C["i"](n).broadcastTo([e].concat(Object(T["a"])(n.shape)));o=o.mul(s),c=c.mul(s),i=C["d"](o.sum(1),c.sum(1))}i=i.add(C["q"](i.shape,0,r[2]));var u=this.toCartesian(i);return u}}]),e}(),N=2,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~",G=function(){function e(t){Object(R["a"])(this,e),this.logger=t}return Object(_["a"])(e,[{key:"init",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C["r"]();case 2:return console.log("Initial tf.ENV.features",C["a"].features),C["a"].set("WEBGL_CONV_IM2COL",!1),C["a"].set("WEBGL_FORCE_F16_TEXTURES",!0),C["a"].set("WEBGL_RENDER_FLOAT32_ENABLED",!1),e.next=8,C["r"]();case 8:return console.log("New tf.ENV.features",C["a"].features),console.log("Production mode"),C["m"](),this.generator=new L(this.logger),this.preferenceModel=new S,e.next=14,this.generator.init(t);case 14:this.preferenceModel.init();case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createPictures",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=null,e.prev=1,a=C["y"]((function(){return i.preferenceModel.generate(t,r)})),e.next=5,this.generatePicturesFromTensor(a,n);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,C["k"](a),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"generatePictures",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,e.prev=1,n=C["x"](t),e.next=5,this.generatePicturesFromTensor(n,r);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,C["k"](n),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"generatePicturesFromTensor",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.generator.generate(t,r);case 2:return n=e.sent,e.next=5,t.array();case 5:a=e.sent,i=0;case 7:if(!(i<t.shape[0])){e.next=13;break}return n[i].latents=a[i],e.abrupt("return",n);case 10:++i,e.next=7;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"learn",value:function(e){var t=null;try{t=C["x"](e),this.preferenceModel.train(t)}finally{C["k"](t)}}},{key:"isRandom",get:function(){return this.preferenceModel.isRandom}},{key:"convertLatentsToURIString",value:function(e){for(var t=this,r=C["y"]((function(){return t.preferenceModel.toSperical(C["x"]([e])).arraySync()[0]})),n=A.length,a=Math.pow(n,N),i="",s=0;s<r.length;++s){var o=Math.round((r[s]/Math.PI*.5+.5)*a);o=Math.min(Math.max(0,o),a);for(var c=[],u=0;u<N;++u){var l=o%n;c.push(A[l]),o=Math.trunc(o/n)}i+=c.reverse().join("")}return i}},{key:"convertURIStringToLatents",value:function(e){for(var t=this,r=A.length,n=Math.pow(r,N),a=new Array,i=0;i<e.length;i+=N){for(var s=0,o=0;o<N;++o){var c=A.indexOf(e[i+o]);s+=c*Math.pow(r,N-o-1)}var u=2*(s/n-.5)*Math.PI;a.push(u)}return C["y"]((function(){return t.preferenceModel.toCartesian(C["x"]([a])).arraySync()[0]}))}}]),e}();function W(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=C["p"]([].concat(Object(T["a"])(e),[t]),r),i=C["l"](a,a.sum(-1,!0)),s=1/t,o=C["c"](C["n"](C["w"](i,s),n),s);return o}function F(e){for(var t=e.shape[0],r=e.shape[1]+1,n=C["t"](e).arraySync(),a=C["f"]([t,r]),i=0;i<t;++i){var s=1;a.set(s,i,0);for(var o=0;o<r-1;++o)s*=n[i][o],a.set(s,i,o+1)}var c=C["i"](e),u=C["n"](a.toTensor(),C["h"]([c,C["o"]([t,1])],1));return u}function D(e){var t=e.shape[1],r=C["s"](C["v"](e),1),n=C["s"](C["u"](C["j"](r,1)),1).slice([0,0],[-1,t-1]),a=e.split([t-1,1],1),i=1e-10,s=a[0].div(n.add(i)),o=C["b"](s);o=o.mul(n.greater(i));var c=o.split([t-2,1],1),u=a[1].less(0).mul(-2).add(1);return c[1]=c[1].mul(u),C["h"](c,1)}var K=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(R["a"])(this,e),Object(P["a"])(this,"latents",void 0),Object(P["a"])(this,"preview",void 0),Object(P["a"])(this,"full",null),Object(P["a"])(this,"liked",!1),Object(P["a"])(this,"creationTime",performance.now()),this.latents=t,this.preview=r,this.full=n}return Object(_["a"])(e,[{key:"lifeTime",value:function(){return performance.now()-this.creationTime}}]),e}(),V={WELCOME:"WELCOME",INIT:"INIT",WORKING:"WORKING",EXIT:"EXIT",ERROR:"ERROR"},q=function(){function e(t){Object(R["a"])(this,e),this.gtag=t}return Object(_["a"])(e,[{key:"log",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;console.log(e,t,r,n),this.gtag.event({eventCategory:e,eventAction:t,eventLabel:r,eventValue:n})}},{key:"logException",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;console.error(e,t,r),this.gtag.event({eventCategory:"LogError",eventAction:e,eventLabel:t.stack,eventValue:r})}}]),e}(),U={data:function(){return{state:V.WELCOME,pictures:[],varianceSlider:2,fullPicture:null,isGenerating:!1,isMobile:!1,isScrollingRequiredForNewPictures:!1,progressMessage:"Loading ...",previewScrollTop:null,fatalError:"",showFatalError:!1}},computed:{findLikes:function(){var e=this.pictures.filter((function(e){return e.liked}));return e},hasLikes:function(){return this.findLikes.length>0}},methods:{getPicturesTask:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,o,c,u,l,f,h,p,d,v,g,m,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isGenerating=!1,t.next=4,e.engine.init((function(t){e.progressMessage=t}));case 4:if(e.progressMessage="Warming up ...",!("show"in e.$route.query)){t.next=14;break}return r=e.engine.convertURIStringToLatents(e.$route.query["show"]),t.next=9,e.engine.generatePictures([r],["preview","full"]);case 9:n=t.sent,e.checkFatalError(n),a=new K(n[0].latents,n[0].preview,n[0].full),e.pictures.push(a),e.fullPicture=a;case 14:e.state=V.WORKING;case 15:return e.isGenerating=!1,t.next=18,B(50);case 18:if(e.isActive){t.next=20;break}return t.abrupt("continue",48);case 20:if(e.state==V.WORKING){t.next=22;break}return t.abrupt("break",50);case 22:if(e.isGenerating=!0,i=e.fullPicture,null===i){t.next=31;break}if(null!==i.full){t.next=30;break}return t.next=28,e.engine.generatePictures([i.latents],["full"]);case 28:s=t.sent,i.full=s[0].full;case 30:return t.abrupt("continue",48);case 31:if(e.isLearningTriggered){e.isLearningTriggered=!1,o=e.findLikes,c=[],u=Object(O["a"])(o);try{for(u.s();!(l=u.n()).done;)f=l.value,c.push(f.latents)}catch(k){u.e(k)}finally{u.f()}e.engine.learn(c)}if(h=e.pictures.filter((function(e){return null===e.preview&&e.lifeTime()>100})),!(h.length>0)){t.next=41;break}return t.next=36,e.engine.createPictures(h.length,e.varianceSlider,["preview"]);case 36:for(p=t.sent,e.checkFatalError(p),e.state===V.INIT&&(e.state=V.WORKING),d=0;d<p.length;++d)h[d].preview=p[d].preview,h[d].latents=p[d].latents;return t.abrupt("continue",48);case 41:if(!(document.documentElement.scrollTop+window.innerHeight<document.documentElement.offsetHeight-90)){t.next=44;break}return e.isScrollingRequiredForNewPictures=!0,t.abrupt("continue",48);case 44:for(e.isScrollingRequiredForNewPictures=!1,v=1,g=[],m=0;m<v;++m)b=new K(null,null),g.push(b),e.pictures.push(b);case 48:t.next=15;break;case 50:t.next=57;break;case 52:t.prev=52,t.t0=t["catch"](0),e.logger.logException("Images.getPicturesTask.createPictures",t.t0),e.fatalError=t.t0.stack,e.state!=V.WELCOME&&(e.state=V.ERROR);case 57:e.isGenerating=!1;case 58:case"end":return t.stop()}}),t,null,[[0,52]])})))()},checkFatalError:function(e){var t,r=Object(O["a"])(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if("ERROR"===n.preview)throw this.state=V.ERROR,Error("Cannot create preview picture.")}}catch(a){r.e(a)}finally{r.f()}},reload:function(){location.reload()},startDemo:function(){this.state!==V.INIT&&(this.state=V.INIT,this.getPicturesTask())},stopDemo:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.state!=V.WORKING||!e.isGenerating){t.next=5;break}return t.next=3,B(50);case 3:t.next=0;break;case 5:e.state=V.WELCOME;case 6:case"end":return t.stop()}}),t)})))()},toggleLike:function(e){e.liked=!e.liked,this.isLearningTriggered=!0},showFullPicture:function(e){this.previewScrollTop=document.documentElement.scrollTop,document.documentElement.scrollTop=0,this.fullPicture=e},closeFullPicture:function(){this.fullPicture=null},unlikeAll:function(){var e,t=Object(O["a"])(this.pictures);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.liked&&(r.liked=!1,this.isLearningTriggered=!0)}}catch(n){t.e(n)}finally{t.f()}},shareUrl:function(){var e=window.location.href;return this.state!==V.WELCOME&&(e+="?show="+this.engine.convertLatentsToURIString(this.fullPicture.latents)),e},shareTitle:function(){return"Make the Person of Your Dreams"}},created:function(){this.stateKind=V,this.Picture=K,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.logger=new q(this.$gtag),this.isActive=!0,this.isLearningTriggered=!1,this.engine=new G(this.logger)},mounted:function(){"show"in this.$route.query&&this.startDemo()},beforeDestroy:function(){this.state=V.EXIT},updated:function(){null===this.fullPicture&&null!==this.previewScrollTop&&(document.documentElement.scrollTop=this.previewScrollTop,this.previewScrollTop=null)},watch:{$route:function(e,t){this.isActive="Home"===e.name}}};function B(e){return new Promise((function(t){return setTimeout(t,e)}))}var $=U,H=(r("5e08"),Object(s["a"])($,y,x,!1,null,"01fcaf75",null)),Y=H.exports,X={name:"Home",components:{Images:Y}},z=X,J=Object(s["a"])(z,k,w,!1,null,null,null),Q=J.exports;r("f669");g["c"].add(b["c"]),g["c"].add(b["a"]),g["c"].add(b["b"]),n["default"].component("font-awesome-icon",m["a"]),n["default"].use(f["a"]),n["default"].use(h["a"]),n["default"].use(p["a"]),n["default"].use(l["a"]),n["default"].use(v.a);var Z=[{path:"/",name:"Home",component:Q}],ee=new l["a"]({mode:"history",base:"/preference-model/",routes:Z}),te=ee,re=r("a584");n["default"].config.productionTip=!1,n["default"].use(re["a"],{config:{id:"G-M6ZS8H863N"}}),new n["default"]({router:te,render:function(e){return e(u)}}).$mount("#app")},"5e08":function(e,t,r){"use strict";r("3286")},f669:function(e,t,r){}});
//# sourceMappingURL=app.34858068.js.map