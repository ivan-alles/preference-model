{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?568f","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?71d9","webpack:///./src/components/Images.vue?163b","webpack:///./src/client-engine.js","webpack:///src/components/Images.vue","webpack:///./src/components/Images.vue?1bf6","webpack:///./src/components/Images.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/Images.vue?2fe6"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","script","component","staticClass","state","stateKind","WELCOME","_v","_e","fullPicture","shareUrl","shareTitle","on","$event","startDemo","WORKING","_l","picture","index","preview","showFullPicture","toggleLike","hasLikes","unlikeAll","stopDemo","model","callback","$$v","varianceSlider","expression","closeFullPicture","full","INIT","_s","progressMessage","ERROR","reload","showFatalError","fatalError","MODEL_URLS","common","Generator","logger","models","onProgress","modelNumber","entries","url","console","log","loadGraphModel","fraction","progress","Math","round","latents","modelNames","shape","element","modelName","intermediate","predict","canvas","document","createElement","makePictures","pictures","logException","tf","Array","fill","output","unstack","toPixels","toDataURL","dispose","PreferenceModel","VARIANCE_PARAMS","trainingExamplesPhi","cols","const2","concat","constPi","PI","trainingExamples","toSperical","cartesian","phi","cartesianToSpherical","mul","sub","spherical","add","div","sphericalToCartesian","size","variance","isRandom","varianceParams","k","outputPhi","broadcastTo","scaledDirichlet","expandDims","sin","cos","sum","toCartesian","URI_STRING_ELEMENT_SIZE","URI_CHARS","Engine","features","set","generator","preferenceModel","init","latentsTensor","generate","generatePicturesFromTensor","array","likes","likesTensor","train","arraySync","numDigits","factor","pow","integer","min","max","chars","digit","trunc","reverse","join","uriStr","numbers","indexOf","float","a","scale","y","x","mean","prodSinBuffer","toTensor","x2","cn","xParts","split","EPSILON","xn","greater","phiParts","less","gtag","isGenerating","isMobile","isScrollingRequiredForNewPictures","previewScrollTop","computed","findLikes","methods","checkFatalError","location","getPicturesTask","liked","isLearningTriggered","documentElement","scrollTop","engine","convertLatentsToURIString","created","Picture","test","navigator","userAgent","isActive","mounted","beforeDestroy","EXIT","updated","watch","$route","to","sleep","ms","Promise","components","Images","library","faVk","faFacebook","faTwitter","Vue","FontAwesomeIcon","use","BootstrapVue","IconsPlugin","FormInputPlugin","VueRouter","VueSocialSharing","routes","path","Home","router","base","process","config","productionTip","VueGtag","id","render","h","App","$mount"],"mappings":"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","file":"js/app.34858068.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/preference-model/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('keep-alive',[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4ac9c7b0&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('Images',{attrs:{\"msg\":\"Welcome to Your Vue.js App\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[(_vm.state === _vm.stateKind.WELCOME)?[_c('h1',[_vm._v(\"Make the Person of Your Dreams\")]),_c('h4',[_vm._v(\"A demonstration of human-AI collaboration in computational creativity\")])]:_vm._e(),(_vm.state === _vm.stateKind.WELCOME || _vm.fullPicture !== null)?[_c('ShareNetwork',{attrs:{\"network\":\"Facebook\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle()}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('font-awesome-icon',{attrs:{\"icon\":['fab', 'facebook'],\"size\":\"lg\"}})],1)],1),_c('ShareNetwork',{attrs:{\"network\":\"Twitter\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle()}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('font-awesome-icon',{attrs:{\"icon\":['fab', 'twitter'],\"size\":\"lg\"}})],1)],1),_c('ShareNetwork',{attrs:{\"network\":\"VK\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle()}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('font-awesome-icon',{attrs:{\"icon\":['fab', 'vk'],\"size\":\"lg\"}})],1)],1),_c('ShareNetwork',{attrs:{\"network\":\"Email\",\"url\":_vm.shareUrl(),\"title\":_vm.shareTitle(),\"description\":\"\\n        Please put the URL above to the address bar of your browser.\"}},[_c('b-button',{attrs:{\"variant\":\"secondary\"}},[_c('b-icon',{attrs:{\"icon\":\"envelope\"}})],1)],1)]:_vm._e(),(_vm.state === _vm.stateKind.WELCOME)?[_c('div',{staticClass:\"youtube-super-container\"},[_c('div',{staticClass:\"youtube-container\"},[_c('iframe',{staticClass:\"youtube-video\",attrs:{\"src\":\"https://www.youtube.com/embed/7jcK6ndK4tY\",\"frameborder\":\"0\",\"allow\":\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\"allowfullscreen\":\"\"}})])]),_c('div',{staticClass:\"main-text\"},[_c('section',[_c('p',[_vm._v(\"This app demonstrates how computational creativity can work together with you to create beautiful pictures.\")]),_c('p',[_vm._v(\"In the beginning, you will see random pictures dreamed up by a neural network. This neural network is called a generator. The people on the images look natural, but they do not exist! \")]),_c('p',[_vm._v(\"When you like some pictures, the AI will learn them. Then, the generator starts to create new images sharing the common traits of your likes.\")]),_c('p',[_vm._v(\"You can vary the pictures less or more by changing the \"),_c('b',[_vm._v(\"Variance\")]),_vm._v(\".\")]),_c('p',[_vm._v(\"Now you can select the best of the new pictures to create even more beautiful ones. Eventually, you can let the AI make the person of your dreams!\")]),_c('p',[_vm._v(\"See more on \"),_c('a',{attrs:{\"href\":\"https://github.com/ivan-alles/preference-model\"}},[_vm._v(\"Github\")]),_vm._v(\".\")])]),_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.startDemo()}}},[_vm._v(\" Start \")]),_c('section',[_c('h2',[_vm._v(\"Credits\")]),_c('p',[_vm._v(\" The generator is from the \"),_c('a',{attrs:{\"href\":\"https://github.com/tkarras/progressive_growing_of_gans\"}},[_vm._v(\"Progressive Growing of GANs for Improved Quality, Stability, and Variation\")]),_vm._v(\" by Tero Karras, Timo Aila, Samuli Laine, and Jaakko Lehtinen, licensed under the Creative Commons CC BY-NC 4.0 license. \")])])],1)]:_vm._e(),(_vm.state === _vm.stateKind.WORKING)?[(_vm.fullPicture === null)?[_c('div',{staticClass:\"flex-container content\"},[_vm._l((_vm.pictures),function(picture,index){return _c('div',{key:index,staticClass:\"picture\"},[(picture.preview !== null)?[_c('img',{staticClass:\"preview-img\",attrs:{\"src\":picture.preview},on:{\"click\":function($event){return _vm.showFullPicture(picture)}}}),(picture.liked)?_c('span',[_c('b-icon',{staticClass:\"like-button liked\",attrs:{\"icon\":\"heart-fill\"},on:{\"click\":function($event){return _vm.toggleLike(picture)}}})],1):_c('span',[_c('b-icon',{staticClass:\"like-button\",attrs:{\"icon\":\"heart\"},on:{\"click\":function($event){return _vm.toggleLike(picture)}}})],1)]:[_c('h4',[_c('b-spinner',{attrs:{\"variant\":\"secondary\",\"label\":\"Dreaming\"}}),_vm._v(\" Dreaming \")],1)]],2)}),_c('p',{staticClass:\"placeholder-picture\"},[(_vm.isScrollingRequiredForNewPictures)?[_vm._v(\" Scroll for more pictures \")]:_vm._e()],2)],2),_c('p',{staticClass:\"placeholder-picture\"}),_c('div',{staticClass:\"footer\"},[_c('b-container',[(! _vm.hasLikes)?[_c('p',[_vm._v(\"Making random pictures.\")]),_c('p',[_c('b-icon',{staticClass:\"like-in-text\",attrs:{\"icon\":\"heart-fill\"}}),_vm._v(\" Like some pictures to dream similar ones. \"),_c('b-button',{attrs:{\"variant\":\"secondary\",\"id\":\"stopDemoButton\"},on:{\"click\":function($event){return _vm.stopDemo()}}},[_vm._v(\" Quit \")])],1)]:[_c('div',{staticClass:\"flex-container content\"},[_c('b-icon',{staticClass:\"like-in-likes\",attrs:{\"icon\":\"heart-fill\"}}),_vm._l((_vm.findLikes),function(picture,index){return _c('div',{key:index,staticClass:\"liked-picture\"},[(picture.preview !== null)?[_c('img',{staticClass:\"liked-img\",attrs:{\"src\":picture.preview},on:{\"click\":function($event){return _vm.toggleLike(picture)}}})]:_vm._e()],2)}),_c('b-button',{attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.unlikeAll()}}},[_c('b-icon',{attrs:{\"icon\":\"trash\"}})],1),_c('b-button',{attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.stopDemo()}}},[_vm._v(\" Quit \")])],2),_c('b-row',[_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('label',[_vm._v(\"Variance\")])]),_c('b-col',{attrs:{\"sm\":\"3\",\"id\":\"variance-slider\"}},[_c('b-form-input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"4\"},model:{value:(_vm.varianceSlider),callback:function ($$v) {_vm.varianceSlider=$$v},expression:\"varianceSlider\"}})],1)],1)]],2)],1)]:[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.closeFullPicture()}}},[_c('b-icon',{attrs:{\"icon\":\"arrow-left-short\"}}),_vm._v(\" Continue \")],1),(_vm.fullPicture.full !== null && _vm.fullPicture.full !== 'ERROR')?[_c('img',{staticClass:\"full-picture\",attrs:{\"src\":_vm.fullPicture.full}})]:[_c('img',{staticClass:\"full-picture\",attrs:{\"src\":_vm.fullPicture.preview}})]]]:_vm._e(),(_vm.state === _vm.stateKind.INIT)?[_c('h4',[_c('b-spinner',{attrs:{\"variant\":\"secondary\",\"label\":\"Loading\"}}),_vm._v(\" \"+_vm._s(_vm.progressMessage)+\" \")],1),(_vm.isMobile)?[_c('p',[_vm._v(\"Running this app on a mobile device can be slow or irresponsive. It works best on a desktop with an NVIDIA graphic card.\")])]:_vm._e()]:_vm._e(),(_vm.state === _vm.stateKind.ERROR)?[_c('h4',{staticClass:\"error\"},[_c('b-icon',{attrs:{\"icon\":\"exclamation-circle-fill\",\"variant\":\"danger\"}}),_vm._v(\" Error \")],1),_c('p',[_vm._v(\" This app works best on a desktop with an NVIDIA graphic card. Other devices may not be supported. \")]),_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.reload()}}},[_c('b-icon',{attrs:{\"icon\":\"bootstrap-reboot\"}}),_vm._v(\" Reload \")],1),_c('b-button',{attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){_vm.showFatalError = true}}},[_vm._v(\" Details \")]),(_vm.showFatalError)?[_c('p',{staticClass:\"fatal-error-text\"},[_vm._v(_vm._s(this.fatalError))])]:_vm._e()]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright 2016-2020 Ivan Alles. See also the LICENSE file. \r\n\r\n// eslint-disable no-unused-vars\r\n\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport {loadGraphModel} from '@tensorflow/tfjs-converter';\r\n\r\nlet MODEL_URLS = \r\n{   \r\n  common: '/karras2018iclr-celebahq-1024x1024-common.tfjs/model.json',\r\n  preview: '/karras2018iclr-celebahq-1024x1024-preview.tfjs/model.json',\r\n  full: '/karras2018iclr-celebahq-1024x1024-full.tfjs/model.json'\r\n}\r\n\r\nclass Generator {\r\n  constructor(logger) {\r\n    this.logger = logger;\r\n    this.models = {};\r\n  }\r\n\r\n  async init(onProgress) {\r\n    // A user-friendly model number to show in the progress message.\r\n    let modelNumber = 1; \r\n    for (let [key, url] of Object.entries(MODEL_URLS)) {\r\n      if (process.env.NODE_ENV === 'production' ) {\r\n        url = '/preference-model' + url;      \r\n      }\r\n\r\n      console.log(`Loading model ${url} ...`)\r\n      this.models[key] = await loadGraphModel(url, {onProgress: fraction => {\r\n        let progress = Math.round(fraction * 100);\r\n        onProgress(`Loading neural network ${modelNumber}: ${progress}%`);\r\n      }});\r\n      console.log(`Model loaded`)\r\n      ++modelNumber;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate pictures from latents. It will try to create images for all model listed in modelNames. \r\n   * In case of an error it will either raise an exception or return the current result with \r\n   * failed or missing images set to 'ERROR'.\r\n   *\r\n   * @param {Tensor} latents a [size, 512] tensor of latents.\r\n   * @param {string[]} modelNames model names ('preview', 'full').\r\n   * @returns {Object[]} an array of objects with fields preview and full. If there was a error in \r\n   * generation of a single image, it value is set to 'ERROR'.\r\n   */\r\n  async generate(latents, modelNames) {\r\n    const result = [];\r\n    for(let i = 0; i < latents.shape[0]; ++i) {\r\n      const element = {};\r\n      for(const modelName of modelNames) {\r\n        element[modelName] = 'ERROR';\r\n      }\r\n\r\n      result.push(element);\r\n    }\r\n\r\n    let intermediate = null;\r\n    try {\r\n      intermediate = this.models['common'].predict(latents);\r\n      let canvas = document.createElement('canvas');\r\n      for(const modelName of modelNames) {\r\n        if(!this.models[modelName]) {\r\n          // We could have deleted a model due to an error.\r\n          continue;\r\n        }\r\n\r\n        const pictures = await this.makePictures(modelName, intermediate, canvas);\r\n        for(let i = 0; i < result.length; ++i) {\r\n          result[i][modelName] = pictures[i];\r\n        }\r\n      }\r\n    }\r\n    catch(error) {\r\n      this.logger.logException('Generator.generate', error);\r\n    }\r\n    finally {\r\n      tf.dispose(intermediate);\r\n    }\r\n    return result; \r\n  }\r\n\r\n  /**\r\n   * Generate pictures as data URL from an intermediate tensor.\r\n   *\r\n   * @param {string} modelName name of the model ('preview' or 'full').\r\n   * @param {Tensor} intermediate an intermediate tensor.\r\n   * @param {Object} canvas a canvas to convert a tensor to a data URL. \r\n   * @returns an array of images.\r\n   */\r\n  async makePictures(modelName, intermediate, canvas) {\r\n    let pictures = null;\r\n    let result = new Array(intermediate.shape[0]).fill('ERROR');\r\n    try {\r\n      pictures = tf.tidy(() => {\r\n        let output = this.models[modelName].predict(intermediate);\r\n        output = tf.clipByValue(output, 0, 1.0);\r\n        // Convert to an array of tensors of shapes [H, W, 3]\r\n        return output.unstack(0);\r\n      });\r\n      for (let i = 0; i < pictures.length; ++i) {\r\n        await tf.browser.toPixels(pictures[i], canvas);\r\n        // Use JPEG compression as potentially more compact.\r\n        // The performance with the default quality is better than PNG.\r\n        result[i] = canvas.toDataURL('image/jpg');\r\n      }\r\n    }\r\n    catch(error) {\r\n      this.logger.logException('Generator.makePictures', error);\r\n      // If generation for a model failed once, it will usually always fail.\r\n      // Remove the model to avoid repetivie failures.\r\n      this.models[modelName].dispose();\r\n      delete this.models[modelName];\r\n      console.log(`Removed model '${modelName}'`);\r\n    }\r\n    finally {\r\n      tf.dispose(pictures);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nclass PreferenceModel {\r\n  constructor(shape=512) {\r\n      this.shape = shape;\r\n\r\n      // For variance from 0 to 4\r\n      // a, scale, std\r\n      this.VARIANCE_PARAMS = [\r\n        [10, 1, .02],\r\n        [3, 1, .03],\r\n        [1, 1, .05],    // Middle range - a uniform dist. in convex combination of training examples\r\n        [1, 1.5, .07],  // Start going outside of the convex combination of training examples\r\n        [1.2, 2.0, .1]  // Concentrate in the middle, as the values at the boarder have little visual difference\r\n      ];\r\n      this.trainingExamplesPhi = null;\r\n  }\r\n\r\n  init() {\r\n    const cols = this.shape - 1;\r\n    this.trainingExamplesPhi = tf.tensor([]); // Use an empty tensor instead of null for uniformity.\r\n\r\n    // Convert [0, pi] <-> [-pi, pi] for all but the last column of angles\r\n    // (it's already so)\r\n    this.const2 = tf.tensor(Array(cols - 1).fill(2).concat(1), [1, cols]);\r\n    this.constPi = tf.tensor(Array(cols - 1).fill(Math.PI).concat(0), [1, cols]);\r\n  }\r\n\r\n  get isRandom() {\r\n    return this.trainingExamplesPhi === null || this.trainingExamplesPhi.shape[0] === 0;\r\n  }\r\n  \r\n  /**\r\n   * Train model on given training examples.\r\n   * @param {Tensor} trainingExamples a tensor [size, this.shape]. If size === 0 \r\n   * (regardless of the shape), revert to uniform random generator.\r\n   */\r\n  train(trainingExamples) {\r\n    tf.dispose(this.trainingExamplesPhi);\r\n    this.trainingExamplesPhi = tf.tidy(() => this.toSperical(trainingExamples));\r\n  }\r\n\r\n  /**\r\n   * Converts latents from cartesian to \"uniformly normalized\" spherical form.\r\n   * @param {Tensor} cartesian cartesian latents.\r\n   * @returns {Tensor} spherical coordiates with all elements in range [-pi, pi].\r\n   */\r\n  toSperical(cartesian) {\r\n    if(cartesian.shape[0] === 0) {\r\n      return tf.tensor([]);\r\n    }\r\n    let phi = cartesianToSpherical(cartesian);\r\n    // [0, pi] -> [-pi, pi] for all but the last.\r\n    return phi.mul(this.const2).sub(this.constPi);\r\n  }\r\n\r\n  /**\r\n   * Converts latents from spherical (returned by toSperical()) to cartesian.\r\n   * @param {Tensor} spherical spherical latents.\r\n   * @returns {Tensor} spherical coordiates with all elements in range [-pi, pi].\r\n   */\r\n  toCartesian(spherical) {\r\n    // [-pi, pi] -> [0, pi] for all but the last.\r\n    spherical = spherical.add(this.constPi).div(this.const2);\r\n    return sphericalToCartesian(spherical);\r\n  }\r\n\r\n  /**\r\n   * Generate new pictures.\r\n   * @param {number} size number of pictures.\r\n   * @param {number} variance an index to select a value from VARIANCE_PARAMS.\r\n   */\r\n  generate(size, variance) {\r\n    if (this.isRandom) {\r\n      // Sample uniform random points on n-sphere.\r\n      // See https://mathworld.wolfram.com/HyperspherePointPicking.html\r\n      // Do not normalize the length, as we will only work with the angles.\r\n      return tf.randomNormal([size, this.shape]);\r\n    }\r\n    const varianceParams = this.VARIANCE_PARAMS[variance];\r\n\r\n    const phi = this.trainingExamplesPhi;\r\n    const k = phi.shape[0];\r\n\r\n    let outputPhi = null;\r\n    if (k == 1) {\r\n      // Only one training example, it will be varied later by a normal 'noise'.\r\n      outputPhi = phi.broadcastTo([size, phi.shape[1]]);\r\n    }\r\n    else {\r\n      // Random coefficients of shape (size, k, 1)\r\n      const r = scaledDirichlet([size], k, varianceParams[0], varianceParams[1]).expandDims(2);\r\n      // Sines and cosines of shape (size, k, 511)\r\n      let sin = tf.sin(phi).broadcastTo([size, ...phi.shape]);\r\n      let cos = tf.cos(phi).broadcastTo([size, ...phi.shape]);\r\n      sin = sin.mul(r);\r\n      cos = cos.mul(r);\r\n      // Linear combinations of shape (size, 511)\r\n      outputPhi = tf.atan2(sin.sum(1), cos.sum(1));\r\n    }\r\n\r\n    outputPhi = outputPhi.add(tf.randomNormal(outputPhi.shape, 0, varianceParams[2]));\r\n\r\n    const output = this.toCartesian(outputPhi);\r\n    return output;\r\n  }\r\n}\r\n\r\n// We encode real numbers using this number of charachters.\r\nconst URI_STRING_ELEMENT_SIZE = 2;\r\n\r\n// See https://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters\r\nconst URI_CHARS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~\";\r\n\r\n/**\r\n * Combines alogrithms to implement application logic.\r\n * Converts the data between UI (plain javascript data) to internal representations (tf.tensor).\r\n */\r\nexport class Engine {\r\n  constructor(logger) {\r\n    this.logger = logger;\r\n  }\r\n\r\n  async init(onProgress) {\r\n    // Do tf initialization here, before any usage of it.\r\n    await tf.ready();\r\n\r\n    console.log('Initial tf.ENV.features', tf.ENV.features);\r\n    \r\n    // Switch off the convolution algo conv2dWithIm2Row() with very high memory requirements.\r\n    tf.ENV.set('WEBGL_CONV_IM2COL', false)\r\n\r\n    // Use 16-bit\r\n    tf.ENV.set('WEBGL_FORCE_F16_TEXTURES', true)\r\n    tf.ENV.set('WEBGL_RENDER_FLOAT32_ENABLED', false)\r\n\r\n    // Repeat just in case the settings above require some lengthy initialization.\r\n    await tf.ready();\r\n\r\n    console.log('New tf.ENV.features', tf.ENV.features);\r\n\r\n    // Make a predictable behaviour of the RNGs. Useful for testing.\r\n    // Math.seedrandom(2);\r\n      \r\n\r\n    if (process.env.NODE_ENV === 'production' ) {\r\n      console.log('Production mode');\r\n      tf.enableProdMode();\r\n    }\r\n    else {\r\n      console.log('Development mode');\r\n    }\r\n\r\n    this.generator = new Generator(this.logger);\r\n    this.preferenceModel = new PreferenceModel();\r\n\r\n    await this.generator.init(onProgress);\r\n    this.preferenceModel.init();\r\n  }\r\n\r\n  /**\r\n   * Create new pictures.\r\n   * @param {number} size number of pictures.\r\n   * @param {number} variance a number from 0 to 4 controlling the variance of the pictures.\r\n   * @param {string[]} modelNames model names ('preview', 'full').\r\n   * @returns {Object} a object with fields latents, preview, full.\r\n   */\r\n  async createPictures(size, variance, modelNames) {\r\n    // console.log('tf.memory', tf.memory());\r\n    let latentsTensor = null;\r\n    try {\r\n      latentsTensor = tf.tidy(() => this.preferenceModel.generate(size, variance));\r\n      return await this.generatePicturesFromTensor(latentsTensor, modelNames);\r\n    }\r\n    finally {\r\n      tf.dispose(latentsTensor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate pictures from latents.\r\n   * @param {number[][]} latents array of latent vectors.\r\n   * @param {string[]} modelNames model names ('preview', 'full').\r\n   * @returns {Object} a object with fields latents, preview, full.\r\n   */\r\n  async generatePictures(latents, modelNames) {\r\n    let latentsTensor = null;\r\n    try {\r\n      latentsTensor = tf.tensor(latents);\r\n      return await this.generatePicturesFromTensor(latentsTensor, modelNames);\r\n    }\r\n    finally {\r\n      tf.dispose(latentsTensor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate pictures from a tensor of latents.\r\n   * @param {Tensor} latentsTensor\r\n   * @param {string[]} modelNames model names ('preview', 'full').\r\n   * @returns {Object} a object with fields latents, preview, full.\r\n   */\r\n  async generatePicturesFromTensor(latentsTensor, modelNames) {\r\n    const result = await this.generator.generate(latentsTensor, modelNames);\r\n    const latents = await latentsTensor.array();\r\n    for(let i = 0; i < latentsTensor.shape[0]; ++i) {\r\n      result[i].latents = latents[i];\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Learn likes.\r\n   * @param {number[][]} likes array of liked latents.\r\n   */\r\n  learn(likes) {\r\n    let likesTensor = null;\r\n    try {\r\n      likesTensor = tf.tensor(likes);\r\n      this.preferenceModel.train(likesTensor);\r\n    }\r\n    finally {\r\n      tf.dispose(likesTensor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if random pictures are generated.\r\n   * @readonly\r\n   */\r\n  get isRandom() {\r\n    return this.preferenceModel.isRandom;\r\n  }\r\n\r\n  /**\r\n   * Convert a vector of latents to an URI string. Use spherical coordinates as more reliable format.\r\n   * @param {number[]} latents\r\n   * @returns {string} string containing URI-conform characters.\r\n   */\r\n  convertLatentsToURIString(latents) {\r\n    const spherical =  tf.tidy(() => this.preferenceModel.toSperical(tf.tensor([latents])).arraySync()[0]);\r\n    const numDigits = URI_CHARS.length;\r\n    const factor = Math.pow(numDigits, URI_STRING_ELEMENT_SIZE);\r\n\r\n    let result = '';\r\n    for(let i = 0; i < spherical.length; ++i) {\r\n      let integer = Math.round((spherical[i] / Math.PI * 0.5 + 0.5) * factor);\r\n      integer = Math.min(Math.max(0, integer), factor);\r\n      const chars = [];\r\n      for(let j = 0; j < URI_STRING_ELEMENT_SIZE; ++j) {\r\n        const digit = integer % numDigits;\r\n        chars.push(URI_CHARS[digit]);\r\n        integer = Math.trunc(integer / numDigits);\r\n      }\r\n      result += chars.reverse().join('');\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Convert an URI-encoded latent back to an array of floats.\r\n   * @param {str} URI parameter.\r\n   * @returns {number[]} an array of floats.\r\n  */\r\n  convertURIStringToLatents(uriStr) {\r\n    const numDigits = URI_CHARS.length;\r\n    const factor = Math.pow(numDigits, URI_STRING_ELEMENT_SIZE);\r\n    let numbers = new Array();\r\n    for(let i = 0; i < uriStr.length; i += URI_STRING_ELEMENT_SIZE) {\r\n      let integer = 0;\r\n      for(let j = 0; j < URI_STRING_ELEMENT_SIZE; ++j) {\r\n        const digit = URI_CHARS.indexOf(uriStr[i + j]);\r\n        integer += digit * Math.pow(numDigits, URI_STRING_ELEMENT_SIZE - j - 1);\r\n\r\n      }\r\n      const float = (integer / factor - 0.5) * 2 * Math.PI;\r\n      numbers.push(float);\r\n    }\r\n\r\n    return tf.tidy(() => {\r\n      return this.preferenceModel.toCartesian(tf.tensor([numbers])).arraySync()[0];\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Sample from a symmetric Dirichlet distribution of dimension k and parameter a,\r\n * scaled around its mean.\r\n *\r\n * @param {array} shape output shape, the output will have a shape of [shape, k]. \r\n * @param {number} k dimensionality.\r\n * @param {number} a concentration parameter in [eps, +inf]. eps shall be > 0.01 or so to avoid nans.\r\n * @param {number} scale scale: scale factor.\r\n * @returns {Tensor} a tensor of shape [shape, k].\r\n */\r\nfunction scaledDirichlet(shape, k, a, scale=1) {\r\n  // Use the gamma distribution to sample from a Dirichlet distribution.\r\n  // See https://en.wikipedia.org/wiki/Dirichlet_distribution\r\n\r\n  const y = tf.randomGamma([...shape, k], a);\r\n  const x = tf.div(y, y.sum(-1, true));\r\n  const mean = 1 / k;\r\n  const d = tf.add(tf.mul(tf.sub(x, mean), scale), mean);\r\n\r\n  return d;\r\n}\r\n\r\n/**\r\n * Converts spherical to cartesian coordinates in n dimensions. \r\n * The resulting vectors will be on a unit sphere.\r\n * See https://en.wikipedia.org/wiki/N-sphere#Spherical_coordinates.\r\n *\r\n * @param {Tensor} phi a tensor [size, n-1] of angles.\r\n *  phi[0:n-2] is in [0, pi], \r\n *  phi[n-1] is in [-pi, pi].\r\n * @returns {Tensor} a tensor [size, n] of n-dimensional unit vectors.\r\n */\r\nfunction sphericalToCartesian(phi) {\r\n    const size = phi.shape[0];  // Number of vectors\r\n    const n = phi.shape[1] + 1; // Dimentionality\r\n    const sin = tf.sin(phi).arraySync();\r\n    let prodSinBuffer = tf.buffer([size, n]);\r\n    for(let i = 0; i < size; ++i) {\r\n      let p = 1;\r\n      prodSinBuffer.set(p, i, 0);\r\n      for(let j = 0; j < n-1; ++j) {\r\n        p *= sin[i][j];\r\n        prodSinBuffer.set(p, i, j+1);\r\n      }\r\n    }\r\n    const cos = tf.cos(phi);\r\n    const x = tf.mul(\r\n      prodSinBuffer.toTensor(),\r\n      tf.concat([cos, tf.ones([size, 1])], 1)\r\n    );\r\n    return x;\r\n}\r\n\r\n/**\r\n * Converts cartesian to spherical coordinates in n dimensions. \r\n * The resulting r is ignored, as if the input were on the unit sphere.\r\n * See https://en.wikipedia.org/wiki/N-sphere#Spherical_coordinates.\r\n *\r\n * @param {Tensor} x a tensor [size, n] of cartesian n-dimensional vectors.\r\n * @returns {Tensor} a tensor [size, n-1] of angles phi, such that \r\n * phi[0:n-2] is in [0, pi], phi[n-1] is in [-pi, pi].\r\n */\r\nfunction cartesianToSpherical(x) {\r\n  const n = x.shape[1]; // Dimentionality\r\n\r\n  const x2 = tf.reverse(tf.square(x), 1);\r\n  const cn = tf.reverse(tf.sqrt(tf.cumsum(x2, 1)), 1).slice([0, 0], [-1,  n - 1]);\r\n  // First n-1 columns and the last column.\r\n  const xParts = x.split([n-1, 1], 1);\r\n  // Elements <= EPSILON will be set to 0.\r\n  const EPSILON = 1e-10;\r\n  const xn = xParts[0].div(cn.add(EPSILON));\r\n\r\n  let phi = tf.acos(xn);\r\n  // Reset elements <= EPSILON to 0.\r\n  phi = phi.mul(cn.greater(EPSILON));\r\n  const phiParts = phi.split([n-2, 1], 1);\r\n\r\n  /*\r\n    The description in wikipedia boils down to changing the sign of the  phi_(n-1) \r\n    (using 1-based indexing) if and only if\r\n    1. there is no k such that x_k != 0 and all x_i == 0 for i > k\r\n    and\r\n    2. x_n < 0\r\n  */\r\n\r\n  // -1 if last column of x < 0, otherwise 1\r\n  let s = xParts[1].less(0).mul(-2).add(1); \r\n  phiParts[1] = phiParts[1].mul(s);\r\n  \r\n  return tf.concat(phiParts, 1);\r\n}\r\n\r\n// Export for tests only.\r\nexport const testables = {PreferenceModel, sphericalToCartesian, cartesianToSpherical, scaledDirichlet};","<!-- Copyright 2016-2020 Ivan Alles. See also the LICENSE file. -->\r\n\r\n<template>\r\n  <b-container>\r\n    <template v-if=\"state === stateKind.WELCOME\">\r\n      <h1>Make the Person of Your Dreams</h1>\r\n      <h4>A demonstration of human-AI collaboration in computational creativity</h4>\r\n    </template>\r\n    <template v-if=\"state === stateKind.WELCOME || fullPicture !== null\">\r\n      <ShareNetwork \r\n          network=\"Facebook\"\r\n          :url=\"shareUrl()\"\r\n          :title=\"shareTitle()\"\r\n        >\r\n        <b-button variant=\"secondary\">\r\n          <font-awesome-icon :icon=\"['fab', 'facebook']\" size=\"lg\" ></font-awesome-icon>\r\n        </b-button>\r\n      </ShareNetwork>\r\n      <!-- Twitter does not work with a local URL. -->\r\n      <ShareNetwork\r\n          network=\"Twitter\"\r\n          :url=\"shareUrl()\"\r\n          :title=\"shareTitle()\"\r\n        >\r\n        <b-button variant=\"secondary\">\r\n          <font-awesome-icon :icon=\"['fab', 'twitter']\" size=\"lg\" ></font-awesome-icon>\r\n        </b-button>\r\n      </ShareNetwork>         \r\n      <ShareNetwork\r\n          network=\"VK\"\r\n          :url=\"shareUrl()\"\r\n          :title=\"shareTitle()\"\r\n        >\r\n        <b-button variant=\"secondary\">\r\n          <font-awesome-icon :icon=\"['fab', 'vk']\" size=\"lg\" ></font-awesome-icon>\r\n        </b-button>\r\n      </ShareNetwork>   \r\n      <!-- The URL will be inserted as plain text, so add a line break and a short description. -->\r\n      <ShareNetwork\r\n          network=\"Email\"\r\n          :url=\"shareUrl()\"\r\n          :title=\"shareTitle()\"\r\n          description=\"\r\n          Please put the URL above to the address bar of your browser.\"\r\n        >\r\n        <b-button variant=\"secondary\">\r\n          <b-icon icon=\"envelope\" ></b-icon>\r\n        </b-button>\r\n      </ShareNetwork>        \r\n    </template>\r\n    <template v-if=\"state === stateKind.WELCOME\">\r\n      <div class=\"youtube-super-container\">\r\n        <div class=\"youtube-container\">\r\n          <iframe class=\"youtube-video\" src=\"https://www.youtube.com/embed/7jcK6ndK4tY\" frameborder=\"0\" \r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n        </div>\r\n      </div>\r\n      <div class=\"main-text\">\r\n        <section>\r\n          <p>This app demonstrates how computational creativity can work together with you to create beautiful pictures.</p>\r\n\r\n          <p>In the beginning, you will see random pictures dreamed up by a neural network. This neural network is called a generator. The people on the images look natural, but they do not exist!\r\n\r\n          <p>When you like some pictures, the AI will learn them. Then, the generator starts to create new images sharing the common traits of your likes.</p>\r\n\r\n          <p>You can vary the pictures less or more by changing the <b>Variance</b>.</p>\r\n\r\n          <p>Now you can select the best of the new pictures to create even more beautiful ones. Eventually, you can let the AI make the person of your dreams!</p>\r\n\r\n          <p>See more on <a href=\"https://github.com/ivan-alles/preference-model\">Github</a>.</p>\r\n        </section>\r\n        <b-button @click=\"startDemo()\" variant=\"primary\">\r\n          Start\r\n        </b-button>         \r\n        <section>\r\n          <h2>Credits</h2>\r\n          <p>\r\n          The generator is from the <a href=\"https://github.com/tkarras/progressive_growing_of_gans\">Progressive Growing of GANs for Improved Quality, Stability, and Variation</a> \r\n          by Tero Karras, Timo Aila, Samuli Laine, and Jaakko Lehtinen, licensed under the Creative Commons CC BY-NC 4.0 license.\r\n          </p>\r\n        </section>\r\n      </div>\r\n    </template>\r\n    <template v-if=\"state === stateKind.WORKING\">\r\n      <template v-if=\"fullPicture === null\">\r\n        <div class=\"flex-container content\">\r\n          <div v-for=\"(picture, index) in pictures\" :key=\"index\" class=\"picture\">\r\n            <template v-if=\"picture.preview !== null\">\r\n              <img :src=\"picture.preview\" class=\"preview-img\" @click=\"showFullPicture(picture)\">\r\n              <span v-if=\"picture.liked\">\r\n                <b-icon icon=\"heart-fill\" @click=\"toggleLike(picture)\" class=\"like-button liked\"></b-icon>\r\n              </span>\r\n              <span v-else>\r\n                <b-icon icon=\"heart\" @click=\"toggleLike(picture)\" class=\"like-button\"></b-icon>\r\n              </span>\r\n            </template>\r\n            <template v-else>\r\n              <h4>\r\n                <b-spinner variant=\"secondary\" label=\"Dreaming\"></b-spinner>\r\n                Dreaming\r\n              </h4>\r\n            </template>\r\n          </div>\r\n          <p class=\"placeholder-picture\">\r\n            <template v-if=\"isScrollingRequiredForNewPictures\">\r\n              Scroll for more pictures\r\n            </template>\r\n          </p>\r\n        </div>\r\n        <p class=\"placeholder-picture\"></p>\r\n        <div class=\"footer\">\r\n          <b-container>\r\n            <template v-if=\"! hasLikes\">\r\n              <p>Making random pictures.</p>\r\n              <p>\r\n                <b-icon icon=\"heart-fill\" class=\"like-in-text\"></b-icon>\r\n                Like some pictures to dream similar ones.\r\n                <b-button @click=\"stopDemo()\" variant=\"secondary\" id=\"stopDemoButton\">\r\n                  Quit\r\n                </b-button>                   \r\n              </p>\r\n            </template>\r\n            <template v-else>\r\n              <div class=\"flex-container content\">\r\n                <b-icon icon=\"heart-fill\" class=\"like-in-likes\"></b-icon>\r\n                <div v-for=\"(picture, index) in findLikes\" :key=\"index\" class=\"liked-picture\">\r\n                  <template v-if=\"picture.preview !== null\">\r\n                    <img :src=\"picture.preview\" class=\"liked-img\" @click=\"toggleLike(picture)\">\r\n                  </template>\r\n                </div>\r\n                <b-button @click=\"unlikeAll()\" variant=\"secondary\">\r\n                  <b-icon icon=\"trash\" ></b-icon>\r\n                </b-button>\r\n                <b-button @click=\"stopDemo()\" variant=\"secondary\" >\r\n                  Quit\r\n                </b-button>                  \r\n              </div>\r\n              <b-row>\r\n                <b-col sm=\"1\">\r\n                  <label>Variance</label>\r\n                </b-col>\r\n                <b-col sm=\"3\" id=\"variance-slider\">\r\n                  <b-form-input v-model=\"varianceSlider\" type=\"range\" min=\"0\" max=\"4\"></b-form-input>\r\n                </b-col>\r\n              </b-row>\r\n            </template>\r\n          </b-container>  \r\n        </div>        \r\n      </template>\r\n      <template v-else>\r\n        <b-button @click=\"closeFullPicture()\" variant=\"primary\">\r\n          <b-icon icon=\"arrow-left-short\" ></b-icon>\r\n          Continue\r\n        </b-button>\r\n        <template v-if=\"fullPicture.full !== null && fullPicture.full !== 'ERROR'\">\r\n          <img :src=\"fullPicture.full\" class=\"full-picture\">\r\n        </template>\r\n        <template v-else>\r\n          <img :src=\"fullPicture.preview\" class=\"full-picture\">\r\n        </template>\r\n      </template>\r\n    </template>\r\n    <template v-if=\"state === stateKind.INIT\">\r\n      <h4>\r\n        <b-spinner variant=\"secondary\" label=\"Loading\"></b-spinner>\r\n        {{progressMessage}}\r\n      </h4>\r\n      <template v-if=\"isMobile\">\r\n        <p>Running this app on a mobile device can be slow or irresponsive. It works best on a desktop with an NVIDIA graphic card.</p>\r\n      </template>\r\n    </template>\r\n    <template v-if=\"state === stateKind.ERROR\">\r\n      <!-- The practice have shown that in case of an error we cannot recover. Only reloading the page helps. -->\r\n      <h4 class=\"error\">\r\n        <b-icon icon=\"exclamation-circle-fill\" variant=\"danger\"></b-icon>\r\n        Error\r\n      </h4>\r\n      <p>\r\n      This app works best on a desktop with an NVIDIA graphic card. Other devices may not be supported.\r\n      </p>\r\n      <b-button @click=\"reload()\" variant=\"primary\">\r\n        <b-icon icon=\"bootstrap-reboot\"></b-icon>\r\n          Reload\r\n      </b-button>\r\n      <b-button @click=\"showFatalError = true\" variant=\"secondary\">\r\n        Details\r\n      </b-button>      \r\n      <template v-if=\"showFatalError\">\r\n        <p class='fatal-error-text'>{{this.fatalError}}</p>\r\n      </template>        \r\n    </template>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\n\r\n// import { Engine } from '@/server-engine'\r\nimport { Engine } from '@/client-engine'\r\n\r\nclass Picture {\r\n  // An array of latents.\r\n  latents;\r\n\r\n  // Preivew image in data URL format. Other possible values:\r\n  // null: not created yet.\r\n  // 'ERROR': there was an error in generation.\r\n  preview;\r\n\r\n  // Full image, values as for the preview.\r\n  full = null;\r\n\r\n  // A bool value, true if the picture is liked.\r\n  liked = false;\r\n\r\n  creationTime = performance.now();\r\n\r\n  constructor(latents, preview, full=null) {\r\n    this.latents = latents;\r\n    this.preview = preview;\r\n    this.full = full;\r\n  }\r\n\r\n  /**\r\n   * Lifetime of the cell in ms.\r\n  */\r\n  lifeTime() {\r\n    return performance.now() - this.creationTime;\r\n  }\r\n}\r\n\r\nconst stateKind = {\r\n    WELCOME: 'WELCOME', // Welcome screen.\r\n    INIT: 'INIT',       // Loading models, etc.\r\n    WORKING: 'WORKING', // Working.\r\n    EXIT: 'EXIT',       // App finished.\r\n    ERROR: 'ERROR',     // Fatal error, cannot work.    \r\n}\r\n\r\nclass Logger {\r\n  constructor(gtag) {\r\n    this.gtag = gtag;\r\n  }\r\n\r\n  log(category, action, label, value=1) {\r\n    console.log(category, action, label, value);\r\n    this.gtag.event({\r\n      eventCategory: category,\r\n      eventAction: action,\r\n      eventLabel: label,\r\n      eventValue: value\r\n    });\r\n  }\r\n\r\n  logException(action, exception, value=1) {\r\n    console.error(action, exception, value);\r\n    this.gtag.event({\r\n      eventCategory: 'LogError',\r\n      eventAction: action,\r\n      eventLabel: exception.stack,\r\n      eventValue: value\r\n    });    \r\n  }\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      state: stateKind.WELCOME,\r\n      pictures: [],\r\n      varianceSlider: 2,\r\n      fullPicture: null,\r\n      isGenerating: false, // DNN is working, ignore attempts to quit.\r\n      isMobile: false,\r\n      isScrollingRequiredForNewPictures: false,\r\n      progressMessage: 'Loading ...',\r\n      previewScrollTop: null,\r\n      fatalError: '', // Information about the error triggered ERROR state.\r\n      showFatalError: false,       \r\n    };\r\n  },\r\n  computed: {\r\n    findLikes() {\r\n      let likes = this.pictures.filter(picture => picture.liked);\r\n      return likes;\r\n    },\r\n\r\n    hasLikes: function() {\r\n      return this.findLikes.length > 0;\r\n    },\r\n  },  \r\n\r\n  methods: {\r\n    /**\r\n    * Generates pictures in the background.\r\n    */\r\n    async getPicturesTask() {\r\n      try {\r\n        this.isGenerating = false;\r\n\r\n        await this.engine.init(message => {this.progressMessage = message;});\r\n        this.progressMessage = 'Warming up ...';\r\n        if('show' in this.$route.query) {\r\n          const latents = this.engine.convertURIStringToLatents(this.$route.query['show']);\r\n          const enginePictures = await this.engine.generatePictures([latents], ['preview', 'full']);\r\n          this.checkFatalError(enginePictures);\r\n          const picture = new Picture(enginePictures[0].latents, enginePictures[0].preview, enginePictures[0].full);\r\n          this.pictures.push(picture);\r\n          this.fullPicture = picture;\r\n        }       \r\n\r\n        this.state = stateKind.WORKING;\r\n\r\n        for(;;) {\r\n          this.isGenerating = false;\r\n          await sleep(50);\r\n\r\n          if(!this.isActive) {\r\n            continue;\r\n          }\r\n          if (this.state != stateKind.WORKING) break;\r\n          this.isGenerating = true;\r\n\r\n          // Use a local variable, as the member variable can be reset during async calls.\r\n          const fullPicture = this.fullPicture;\r\n          if(fullPicture !== null) {\r\n            if(fullPicture.full === null) {\r\n              const enginePictures = await this.engine.generatePictures([fullPicture.latents], ['full']);\r\n              fullPicture.full = enginePictures[0].full;\r\n            }\r\n            continue;\r\n          }\r\n          \r\n          if(this.isLearningTriggered) {\r\n            this.isLearningTriggered = false;\r\n            \r\n            const likes = this.findLikes;\r\n            const latents = [];\r\n            for(let like of likes) {\r\n                latents.push(like.latents);\r\n            }\r\n            this.engine.learn(latents);\r\n          }\r\n\r\n          let picturesInProgress = this.pictures.filter(picture => picture.preview === null && picture.lifeTime() > 100);\r\n          if(picturesInProgress.length > 0) {\r\n            const enginePictures = await this.engine.createPictures(picturesInProgress.length, this.varianceSlider, ['preview']);\r\n            this.checkFatalError(enginePictures);\r\n            // Although the initialization is already done, we postone going to the working state until \r\n            // the 1st image is created, as it is slower (warm up) and may even fail.\r\n            // This gives the user more time to see the initial screen.\r\n            if(this.state === stateKind.INIT) {\r\n              this.state = stateKind.WORKING;\r\n            }\r\n            for(let i = 0; i < enginePictures.length; ++i) {\r\n              picturesInProgress[i].preview = enginePictures[i].preview;\r\n              picturesInProgress[i].latents = enginePictures[i].latents;\r\n            }\r\n            continue;\r\n          }\r\n\r\n          // Are images below the bottom of the screen?\r\n          if(document.documentElement.scrollTop + window.innerHeight < document.documentElement.offsetHeight - 90) {\r\n            this.isScrollingRequiredForNewPictures = true;\r\n            continue;\r\n          }\r\n          this.isScrollingRequiredForNewPictures = false;\r\n\r\n          const size = 1;\r\n          let newPictures = [];\r\n          for(let i = 0; i < size; ++i) {\r\n            const picture = new Picture(null, null);\r\n            newPictures.push(picture);\r\n            this.pictures.push(picture);\r\n          }\r\n        }\r\n      }\r\n      catch(error) {\r\n        this.logger.logException('Images.getPicturesTask.createPictures', error);\r\n        this.fatalError = error.stack;\r\n        if (this.state != stateKind.WELCOME) this.state = stateKind.ERROR;\r\n      }\r\n      this.isGenerating = false;\r\n    },\r\n\r\n    checkFatalError(enginePictures) {\r\n      for(const enginePicture of enginePictures) {\r\n        if(enginePicture.preview === 'ERROR') {\r\n          // This is usually a fatal error, cannot continue.\r\n          this.state = stateKind.ERROR;\r\n          throw Error('Cannot create preview picture.');\r\n        }\r\n      }\r\n    },\r\n\r\n    reload() {\r\n      location.reload();\r\n    },\r\n\r\n    startDemo() {\r\n      if(this.state !== stateKind.INIT) {\r\n        this.state = stateKind.INIT;\r\n        this.getPicturesTask();\r\n      }\r\n    },    \r\n\r\n    async stopDemo() {\r\n      // TODO(ia): call it!\r\n      while(this.state == stateKind.WORKING && this.isGenerating) {\r\n        await sleep(50);\r\n      }\r\n      this.state = stateKind.WELCOME;\r\n    },\r\n\r\n    toggleLike(picture) {\r\n      picture.liked = !picture.liked;\r\n      this.isLearningTriggered = true;\r\n    },\r\n\r\n    showFullPicture(picture) {\r\n      this.previewScrollTop = document.documentElement.scrollTop;\r\n      // Ensure visibility of the title and social share buttons.\r\n      document.documentElement.scrollTop = 0;\r\n      this.fullPicture = picture;\r\n    },\r\n\r\n    closeFullPicture() {\r\n      // TODO(ia): restore scroll position so that we see the same area after closing.\r\n      this.fullPicture = null;\r\n    },\r\n\r\n    unlikeAll() {\r\n      for(let picture of this.pictures){\r\n        if(picture.liked) {\r\n          picture.liked = false;\r\n          this.isLearningTriggered = true;\r\n        }\r\n      }\r\n    },\r\n\r\n    shareUrl() {\r\n      let url = window.location.href;\r\n      if(this.state !== stateKind.WELCOME) {\r\n        url += '?show=' + this.engine.convertLatentsToURIString(this.fullPicture.latents);\r\n      }\r\n      return url;\r\n    },\r\n\r\n    shareTitle() {\r\n      return 'Make the Person of Your Dreams';\r\n    },\r\n  },\r\n\r\n  created() {\r\n    // Make globals accessible in Vue rendering code\r\n    this.stateKind = stateKind;\r\n    this.Picture = Picture;\r\n\r\n    this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\r\n    this.logger = new Logger(this.$gtag);\r\n    this.isActive = true;\r\n    this.isLearningTriggered = false;\r\n    this.engine = new Engine(this.logger);\r\n  },\r\n\r\n  mounted() {\r\n    // We opened the app with latents of a big picture. Skip welcome screen, go to the big screen.\r\n    if('show' in this.$route.query) {\r\n      this.startDemo();\r\n    }\r\n  },\r\n\r\n  beforeDestroy () {\r\n    this.state = stateKind.EXIT;\r\n  },\r\n\r\n  updated() {\r\n    if(this.fullPicture === null && this.previewScrollTop !== null) {\r\n      document.documentElement.scrollTop = this.previewScrollTop;\r\n      this.previewScrollTop = null;\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    $route(to, from) { // eslint-disable-line\r\n      // Activate this component when the router points to it.\r\n      this.isActive = to.name === 'Home';\r\n    }\r\n  },\r\n\r\n};\r\n\r\nfunction sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.flex-container {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.picture { \r\n  width: 180px;\r\n  height: 180px;\r\n  margin: 2px;\r\n  text-align: center;\r\n  /* For like button positioning to work. */\r\n  position: relative;\r\n  border: 1px solid var(--secondary);\r\n  border-radius: 4px;\r\n  box-shadow: 2px 2px 4px #0004;\r\n} \r\n\r\n.picture h4 { \r\n  margin-top: 5px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n/* A placeholder of the same size as the picture to enable scrolling before generating real pictures. */\r\n.placeholder-picture { \r\n  width: 180px;\r\n  block-size: 180px;\r\n  margin: 2px;\r\n  border: 1px solid #00000000;\r\n} \r\n\r\n.preview-img {\r\n    height: 100%;\r\n    width: 100%; \r\n    object-fit: contain;\r\n    cursor: zoom-in;\r\n}\r\n\r\n.liked-picture { \r\n  width: 80px;\r\n  height: 80px;\r\n  margin: 1px;\r\n  text-align: center;\r\n  border: 1px solid var(--secondary);\r\n  border-radius: 2px;\r\n}\r\n\r\n.liked-img {\r\n    height: 100%;\r\n    width: 100%; \r\n    object-fit: contain;\r\n}\r\n\r\n.like-in-likes {\r\n  width: 40px;\r\n  height: 80px;\r\n  padding: 5px;\r\n  color: #f52929;\r\n}\r\n\r\n.like-button \r\n{ \r\n  width: 40px; \r\n  height: 40px;\r\n  position: absolute;\r\n  bottom: 5px;\r\n  left: 70px;\r\n  width: 100%; \r\n  color: #f97878;\r\n}\r\n\r\n.like-button:hover {\r\n  color: #f52929;\r\n}\r\n\r\n.liked {\r\n  color: #f52929;\r\n}\r\n\r\n.like-in-text {\r\n  color: #f52929;\r\n}\r\n\r\nbutton {\r\n  margin: 0 0.5rem 0 0;\r\n}\r\n\r\n.full-picture {\r\n  border-radius: 4px;\r\n  box-shadow: 2px 2px 4px #0004;\r\n  margin-top: 10px;  \r\n  width: 100%; \r\n  height: 100%; \r\n}\r\n\r\n.error {\r\n  color: var(--danger);\r\n}\r\n\r\n.footer {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  padding: 2px 5px 2px 5px;\r\n  box-shadow: 0 -5px 5px -5px #0004;\r\n  /* TODO(ia): add shadow at the top.*/\r\n  background-color: #f7f7f9f0;\r\n}\r\n\r\n.main-text {\r\n  margin: 15px 0 0 0;\r\n}\r\n\r\n#stopDemoButton {\r\n  margin-left: 20px;  \r\n}\r\n\r\n/* Limit youtube iframe width on large screen. */\r\n.youtube-super-container {\r\n    max-width: 560px;\r\n}\r\n\r\n/* Responsive youtube iframe, see https://www.h3xed.com/web-development/how-to-make-a-responsive-100-width-youtube-iframe-embed */\r\n.youtube-container {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-bottom: 56.25%;\r\n}\r\n\r\n.youtube-video {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 10px 0 0 0;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Images.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Images.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Images.vue?vue&type=template&id=01fcaf75&scoped=true&\"\nimport script from \"./Images.vue?vue&type=script&lang=js&\"\nexport * from \"./Images.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Images.vue?vue&type=style&index=0&id=01fcaf75&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01fcaf75\",\n  null\n  \n)\n\nexport default component.exports","<!-- Copyright 2016-2020 Ivan Alles. See also the LICENSE file. -->\r\n\r\n<template>\r\n  <div class=\"home\">\r\n    <Images msg=\"Welcome to Your Vue.js App\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport Images from '@/components/Images.vue'\r\n\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    Images\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=e7079b82&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Copyright 2016-2020 Ivan Alles. See also the LICENSE file. \r\n\r\nimport Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport { BootstrapVue, IconsPlugin, FormInputPlugin } from 'bootstrap-vue'\r\nimport VueSocialSharing from 'vue-social-sharing'\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\r\nimport { faVk, faFacebook, faTwitter } from '@fortawesome/free-brands-svg-icons'\r\n\r\nimport Home from '../views/Home.vue'\r\n\r\nimport '../custom.scss'\r\n\r\nlibrary.add(faVk)\r\nlibrary.add(faFacebook)\r\nlibrary.add(faTwitter)\r\nVue.component('font-awesome-icon', FontAwesomeIcon)\r\n\r\nVue.use(BootstrapVue)\r\nVue.use(IconsPlugin)\r\nVue.use(FormInputPlugin)\r\nVue.use(VueRouter)\r\nVue.use(VueSocialSharing)\r\n\r\n  const routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\nexport default router\r\n","// Copyright 2016-2020 Ivan Alles. See also the LICENSE file. \r\n\r\nimport Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport VueGtag from 'vue-gtag'\r\n\r\n\r\nVue.config.productionTip = false\r\n\r\nVue.use(VueGtag, {\r\n  config: { id: 'G-M6ZS8H863N' }\r\n})\r\n\r\nnew Vue({\r\n  router,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Images.vue?vue&type=style&index=0&id=01fcaf75&scoped=true&lang=css&\""],"sourceRoot":""}